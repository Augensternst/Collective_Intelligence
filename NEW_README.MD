
# Pikachu Volleyball AI Training Environment

ğŸ åŸºäºçš®å¡ä¸˜æ’çƒæ¸¸æˆçš„å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ è®­ç»ƒç¯å¢ƒ

![Python](https://img.shields.io/badge/python-3.10+-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)
![Stable Baselines3](https://img.shields.io/badge/RL-Stable%20Baselines3-orange.svg)

## ğŸ“– é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäºç»å…¸çš®å¡ä¸˜æ’çƒæ¸¸æˆçš„AIè®­ç»ƒç¯å¢ƒï¼Œæ”¯æŒï¼š
- ğŸ¤– å•æ™ºèƒ½ä½“è®­ç»ƒï¼ˆå¯¹æˆ˜éšæœº/è§„åˆ™AIï¼‰
- ğŸ”„ è‡ªæˆ‘å¯¹æˆ˜è®­ç»ƒï¼ˆSelf-Playï¼‰
- ğŸ® äººæœºå¯¹æˆ˜æµ‹è¯•
- ğŸ“Š è®­ç»ƒè¿‡ç¨‹å¯è§†åŒ–

åŸºäº [pika-zoo](https://github.com/helpingstar/pika-zoo) ç¯å¢ƒï¼Œä½¿ç”¨ Stable-Baselines3 è¿›è¡Œå¼ºåŒ–å­¦ä¹ è®­ç»ƒã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Python**: 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬
- **æ“ä½œç³»ç»Ÿ**: Windows/Linux/macOS
- **å†…å­˜**: å»ºè®® 4GB ä»¥ä¸Š

### å®‰è£…æ–¹æ³•

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ pipenvï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd pikachu-volleyball-ai

# 2. å®‰è£… pipenv
pip install pipenv

# 3. å®‰è£…ä¾èµ–
pipenv install --dev

# 4. æ¿€æ´»ç¯å¢ƒ
pipenv shell

# 5. ä»¥å¼€å‘æ¨¡å¼å®‰è£…é¡¹ç›®
pip install -e .
```

#### æ–¹æ³•äºŒï¼šä½¿ç”¨ pip + venv

```bash
# 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# 2. æ¿€æ´»ç¯å¢ƒ
# Windows:
venv\Scripts\activate
# Linux/macOS:
source venv/bin/activate

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. å®‰è£…é¡¹ç›®
pip install -e .
```

### éªŒè¯å®‰è£…

```python
python -c "import pikazoo; print('âœ… ç¯å¢ƒå®‰è£…æˆåŠŸï¼')"
```

## ğŸ® ä½¿ç”¨æŒ‡å—

### 1. åŸºç¡€æ¸¸æˆæ¼”ç¤º

```bash
python run.py
```

è§‚çœ‹AIéšæœºå¯¹æˆ˜æ¼”ç¤ºï¼Œç†Ÿæ‚‰æ¸¸æˆç¯å¢ƒã€‚

### 2. è®­ç»ƒAIæ¨¡å‹

#### åŸºç¡€è®­ç»ƒï¼ˆæ¨èæ–°æ‰‹ï¼‰

```bash
# è®­ç»ƒä¸€ä¸ªAIå¯¹æˆ˜éšæœºå¯¹æ‰‹
python train_sb3.py
```

è®­ç»ƒå‚æ•°ï¼š
- è®­ç»ƒæ­¥æ•°ï¼š100ä¸‡æ­¥
- ç®—æ³•ï¼šPPO
- å¯¹æ‰‹ï¼šéšæœºç­–ç•¥
- é¢„è®¡è®­ç»ƒæ—¶é—´ï¼š1-2å°æ—¶

#### è‡ªæˆ‘å¯¹æˆ˜è®­ç»ƒï¼ˆæ¨èè¿›é˜¶ï¼‰

```bash
# è‡ªæˆ‘å¯¹æˆ˜è®­ç»ƒï¼Œè·å¾—æ›´å¼ºAI
python train_selfplay.py
```

è®­ç»ƒç‰¹ç‚¹ï¼š
- 10è½®è¿­ä»£è®­ç»ƒ
- æ¯è½®5ä¸‡æ­¥
- AIä¸ä¹‹å‰ç‰ˆæœ¬å¯¹æˆ˜
- æŒç»­æå‡ç­–ç•¥æ°´å¹³

#### å¤šæ™ºèƒ½ä½“è®­ç»ƒ

```bash
# ä½¿ç”¨ Ray RLlib è¿›è¡Œå¹¶è¡Œè®­ç»ƒ
python train_rllib.py
```

### 3. æµ‹è¯•è®­ç»ƒæ¨¡å‹

```bash
# æµ‹è¯•è®­ç»ƒå¥½çš„æ¨¡å‹
python test_trained_models.py
```

å¯ä»¥è§‚çœ‹ï¼š
- ğŸ¤– AI vs éšæœºå¯¹æ‰‹
- ğŸ¥Š ä¸åŒç‰ˆæœ¬AIå¯¹æˆ˜
- ğŸ“Š èƒœç‡ç»Ÿè®¡

### 4. ç›‘æ§è®­ç»ƒè¿›åº¦

```bash
# å¯åŠ¨ TensorBoard
tensorboard --logdir ./pika_selfplay_tb/

# åœ¨æµè§ˆå™¨ä¸­è®¿é—®: http://localhost:6006
```

å¯ä»¥æŸ¥çœ‹ï¼š
- ğŸ“ˆ è®­ç»ƒå¥–åŠ±æ›²çº¿
- ğŸ“Š æŸå¤±å‡½æ•°å˜åŒ–
- â±ï¸ è®­ç»ƒè¿›åº¦

## ğŸ“ é¡¹ç›®ç»“æ„

```
pikachu-volleyball-ai/
â”œâ”€â”€ ğŸ“‚ pikazoo/                   # æ ¸å¿ƒæ¸¸æˆç¯å¢ƒ
â”‚   â”œâ”€â”€ ğŸ“‚ env/                   # æ¸¸æˆé€»è¾‘
â”‚   â””â”€â”€ ğŸ“‚ wrappers/              # ç¯å¢ƒåŒ…è£…å™¨
â”œâ”€â”€ ğŸ“‚ tests/                     # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ ğŸ“‚ selfplay_checkpoints/      # è‡ªæˆ‘å¯¹æˆ˜æ¨¡å‹æ£€æŸ¥ç‚¹
â”œâ”€â”€ ğŸ“‚ pika_selfplay_tb/         # TensorBoard æ—¥å¿—
â”œâ”€â”€ ğŸ train_sb3.py              # åŸºç¡€è®­ç»ƒè„šæœ¬
â”œâ”€â”€ ğŸ train_selfplay.py         # è‡ªæˆ‘å¯¹æˆ˜è®­ç»ƒè„šæœ¬
â”œâ”€â”€ ğŸ train_rllib.py            # å¤šæ™ºèƒ½ä½“è®­ç»ƒè„šæœ¬
â”œâ”€â”€ ğŸ test_trained_models.py    # æ¨¡å‹æµ‹è¯•è„šæœ¬
â”œâ”€â”€ ğŸ run.py                    # æ¸¸æˆæ¼”ç¤ºè„šæœ¬
â”œâ”€â”€ ğŸ“„ requirements.txt          # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ ğŸ“„ Pipfile                   # pipenv é…ç½®
â””â”€â”€ ğŸ“„ README.md                 # é¡¹ç›®è¯´æ˜
```

## ğŸ¯ è®­ç»ƒæ¨¡å¼è¯¦è§£

### åŸºç¡€è®­ç»ƒæ¨¡å¼

```python
# ç‰¹ç‚¹ï¼š
- å¯¹æ‰‹ï¼šéšæœºç­–ç•¥
- é€‚ç”¨ï¼šåˆå­¦è€…ï¼Œå¿«é€ŸéªŒè¯
- è®­ç»ƒæ—¶é—´ï¼šè¾ƒçŸ­
- æ•ˆæœï¼šåŸºç¡€æ°´å¹³
```

### è‡ªæˆ‘å¯¹æˆ˜æ¨¡å¼

```python
# ç‰¹ç‚¹ï¼š
- å¯¹æ‰‹ï¼šä¹‹å‰è®­ç»ƒçš„è‡ªå·±
- é€‚ç”¨ï¼šè¿½æ±‚é«˜æ°´å¹³AI
- è®­ç»ƒæ—¶é—´ï¼šè¾ƒé•¿
- æ•ˆæœï¼šæŒç»­æå‡ï¼Œæ— ä¸Šé™
```

### è®­ç»ƒå»ºè®®

1. **ğŸ¥‡ æ¨èæµç¨‹**ï¼š
   ```
   åŸºç¡€è®­ç»ƒ â†’ è‡ªæˆ‘å¯¹æˆ˜è®­ç»ƒ â†’ æ¨¡å‹æµ‹è¯•
   ```

2. **âš¡ å¿«é€Ÿä½“éªŒ**ï¼š
   ```bash
   # 15åˆ†é’Ÿå¿«é€Ÿè®­ç»ƒ
   python train_sb3.py --quick --timesteps 50000
   ```

3. **ğŸš€ é•¿æœŸè®­ç»ƒ**ï¼š
   ```bash
   # è¿‡å¤œè®­ç»ƒè·å¾—å¼ºåŠ›AI
   python train_selfplay.py --iterations 20
   ```

## ğŸ® æ¸¸æˆæ§åˆ¶

### åŠ¨ä½œç©ºé—´

| åŠ¨ä½œID | å«ä¹‰ | åŠ¨ä½œID | å«ä¹‰ |
|--------|------|--------|------|
| 0 | æ— åŠ¨ä½œ | 1 | å‘åŠ›å‡»çƒ |
| 2 | å‘ä¸Šè·³ | 3 | å‘å³ç§»åŠ¨ |
| 4 | å‘å·¦ç§»åŠ¨ | 5 | å‘ä¸‹ |
| 6 | å³ä¸Š | 7 | å·¦ä¸Š |
| 8 | å³ä¸‹ | 9 | å·¦ä¸‹ |
| 10 | ä¸Šè·³+å‘åŠ› | 11 | å³ç§»+å‘åŠ› |
| 12 | å·¦ç§»+å‘åŠ› | 13 | ä¸‹+å‘åŠ› |

### æ¸¸æˆè§„åˆ™

- ğŸ **è·èƒœæ¡ä»¶**ï¼šå…ˆè¾¾åˆ°æŒ‡å®šåˆ†æ•°
- âš¡ **å‘åŠ›å‡»çƒ**ï¼šå¯ä»¥æ‰“å‡ºæ›´å¼ºåŠ›çš„æ”»å‡»
- ğŸ¤¸ **æ½œæ°´æ•‘çƒ**ï¼šåœ¨ç©ºä¸­æ—¶æŒ‰å‘åŠ›+æ–¹å‘é”®
- ğŸŒ **ç‰©ç†å¼•æ“**ï¼šçœŸå®çš„çƒä½“å’Œé‡åŠ›æ¨¡æ‹Ÿ

## ğŸ“Š æ¨¡å‹æ€§èƒ½

### è®­ç»ƒæ•ˆæœå±•ç¤º

| è®­ç»ƒæ–¹å¼ | è®­ç»ƒæ—¶é—´ | vséšæœºèƒœç‡ | vsè§„åˆ™AIèƒœç‡ |
|----------|----------|------------|---------------|
| åŸºç¡€è®­ç»ƒ | 1å°æ—¶ | 85% | 45% |
| è‡ªæˆ‘å¯¹æˆ˜(5è½®) | 3å°æ—¶ | 95% | 75% |
| è‡ªæˆ‘å¯¹æˆ˜(10è½®) | 6å°æ—¶ | 98% | 85% |

### è®­ç»ƒæ›²çº¿ç¤ºä¾‹

```
Episode Reward
     â†‘
 1.0 |    â•­â”€â•®
     |   â•±   â•²    â•­â”€â•®
 0.5 |  â•±     â•²  â•±   â•²
     | â•±       â•²â•±     â•²
 0.0 |â•±                â•²
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Training Steps
     0    25K   50K   75K  100K
```

## ğŸ› ï¸ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹è®­ç»ƒå‚æ•°

```python
# train_sb3.py ä¸­ä¿®æ”¹
model = PPO(
    "MlpPolicy",
    env,
    learning_rate=3e-4,    # å­¦ä¹ ç‡
    n_steps=2048,          # æ¯æ¬¡æ›´æ–°çš„æ­¥æ•°
    batch_size=64,         # æ‰¹å¤§å°
    gamma=0.99,            # æŠ˜æ‰£å› å­
)
```

### ä¿®æ”¹æ¸¸æˆè®¾ç½®

```python
# ä¿®æ”¹è·èƒœåˆ†æ•°
env = pikazoo_v0.env(winning_score=15)  # é»˜è®¤15åˆ†

# å¯ç”¨äººæœºå¯¹æˆ˜
env = pikazoo_v0.env(is_player2_computer=True)

# ä¿®æ”¹å‘çƒè§„åˆ™
env = pikazoo_v0.env(serve="random")  # winner/alternate/random
```

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest tests/

# è¿è¡Œç‰¹å®šæµ‹è¯•
python tests/test_env.py
python tests/test_parallel_api.py
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **âŒ ImportError: No module named 'pikazoo'**
   ```bash
   pip install -e .
   ```

2. **âŒ pygame ç›¸å…³é”™è¯¯**
   ```bash
   pip uninstall pygame
   pip install pygame>=2.3.0
   ```

3. **âŒ è®­ç»ƒè¿‡ç¨‹ä¸­æ–­**
   ```bash
   # æ¨¡å‹ä¼šè‡ªåŠ¨ä¿å­˜åˆ° checkpoints/ ç›®å½•
   # å¯ä»¥ä½¿ç”¨ test_trained_models.py åŠ è½½ä¸­æ–­çš„æ¨¡å‹
   ```

4. **âŒ å†…å­˜ä¸è¶³**
   ```bash
   # å‡å°‘è®­ç»ƒæ­¥æ•°æˆ–æ‰¹å¤§å°
   python train_sb3.py --n_steps 1024 --batch_size 32
   ```

### æ€§èƒ½ä¼˜åŒ–

- ğŸ–¥ï¸ **CPUè®­ç»ƒ**ï¼šé€‚åˆå¤§å¤šæ•°æƒ…å†µ
- ğŸ”§ **å‡å°‘æ¸²æŸ“**ï¼šè®­ç»ƒæ—¶è®¾ç½® `render_mode=None`
- ğŸ“Š **ç›‘æ§èµ„æº**ï¼šä½¿ç”¨ä»»åŠ¡ç®¡ç†å™¨æŸ¥çœ‹CPU/å†…å­˜ä½¿ç”¨

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [pika-zoo](https://github.com/helpingstar/pika-zoo) - æä¾›äº†ä¼˜ç§€çš„æ¸¸æˆç¯å¢ƒ
- [Stable-Baselines3](https://github.com/DLR-RM/stable-baselines3) - å¼ºåŒ–å­¦ä¹ ç®—æ³•åº“
- [PettingZoo](https://github.com/Farama-Foundation/PettingZoo) - å¤šæ™ºèƒ½ä½“ç¯å¢ƒæ ‡å‡†

## ğŸ“§ è”ç³»æ–¹å¼

- é¡¹ç›®ç»´æŠ¤è€…ï¼š[ä½ çš„åå­—]
- é‚®ç®±ï¼š[ä½ çš„é‚®ç®±]
- é¡¹ç›®é“¾æ¥ï¼š[https://github.com/your-username/pikachu-volleyball-ai](https://github.com/your-username/pikachu-volleyball-ai)

---

## ğŸ¯ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# ğŸš€ ä¸€é”®å¼€å§‹
pipenv install --dev && pipenv shell && pip install -e .

# ğŸ® å¿«é€Ÿæ¼”ç¤º
python run.py

# ğŸ¤– åŸºç¡€è®­ç»ƒ
python train_sb3.py

# ğŸ”„ è‡ªæˆ‘å¯¹æˆ˜
python train_selfplay.py

# ğŸ§ª æµ‹è¯•æ¨¡å‹
python test_trained_models.py

# ğŸ“Š æŸ¥çœ‹è®­ç»ƒ
tensorboard --logdir ./pika_selfplay_tb/
```

**å¼€å§‹ä½ çš„çš®å¡ä¸˜æ’çƒAIè®­ç»ƒä¹‹æ—…å§ï¼** ğŸğŸ¤–
```

è¿™ä¸ªREADMEæ–‡ä»¶åŒ…å«äº†ï¼š

1. âœ… **é¡¹ç›®ä»‹ç»å’Œç‰¹æ€§**
2. âœ… **è¯¦ç»†çš„å®‰è£…æŒ‡å—**
3. âœ… **å®Œæ•´çš„ä½¿ç”¨æ•™ç¨‹**
4. âœ… **é¡¹ç›®ç»“æ„è¯´æ˜**
5. âœ… **è®­ç»ƒæ¨¡å¼å¯¹æ¯”**
6. âœ… **æ€§èƒ½å±•ç¤º**
7. âœ… **æ•…éšœæ’é™¤æŒ‡å—**
8. âœ… **è‡ªå®šä¹‰é…ç½®æ–¹æ³•**
9. âœ… **å¿«é€Ÿå‘½ä»¤å‚è€ƒ**

ä½ å¯ä»¥æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼š
- é¡¹ç›®é“¾æ¥
- è”ç³»æ–¹å¼
- æ€§èƒ½æ•°æ®
- æ·»åŠ é¡¹ç›®æˆªå›¾æˆ–GIFæ¼”ç¤º

è¿™æ ·åˆ«äººå°±èƒ½å¾ˆå®¹æ˜“åœ°ç†è§£å’Œè¿è¡Œä½ çš„é¡¹ç›®äº†ï¼